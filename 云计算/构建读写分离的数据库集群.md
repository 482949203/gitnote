环境：	节点规划如下：

主机名		IP地址			节点
mycat         192.168.200.166		Mycat中间件服务节点
db1-master    192.168.200.167		MariaDB数据库集群主节点
db2-slave     192.168.200.168		MariaDB数据库集群从节点

Mycat组件，使用 Mycat-server-1.6-RELEASE-20161028204710-linux.tar.gz 压缩包安装
这里提供给大家mycat下载地址：http://dl.mycat.org.cn/1.6-RELEASE/

1：基础环境配置
	一 ：修改3台主机的主机名。
		mycat节点修改主机名：
			[root@localhost ~]# hostnamectl set-hostname mycat
			[root@localhost ~]# bash
			[root@mycat ~]#
		db1-master节点修改主机名：
			[root@localhost ~]# hostnamectl set-hostname db1
			[root@localhost ~]# bash
			[root@db1 ~]# 
		db2-slave节点修改主机名：
			[root@localhost ~]# hostnamectl set-hostname db2
			[root@localhost ~]# bash
			[root@db2 ~]# 
	二 ：编辑 hosts 文件
		#三台集群虚拟机的/etc/hosts 文件配置如下，添加下面三条
			192.168.200.166         mycat
			192.168.200.167         db1
			192.168.200.168         db2
	三：Yum 源配置

# 安装 JDK 环境，在 mycat 节点安装 JDK 环境：
[root@mycat ~]# yum install -y java-1.8.0-openjdk java-1.8.0-openjdk-devel
[root@mycat ~]# java -version		//查看jdk版本
openjdk version "1.8.0_242"
OpenJDK Runtime Environment (build 1.8.0_242-b08)
OpenJDK 64-Bit Server VM (build 25.242-b08, mixed mode

# 关闭防火墙 （全部节点）
[root@mycat ~]# iptables -F
[root@mycat ~]# iptables -X
[root@mycat ~]# iptables -Z
[root@mycat ~]# iptables-save

2：部署 MariaDB 主从数据库集群服务
#在 db1 和 db2 节点上安装 MariaDB 服务，并开启，加入开机项目  //记得开启，否则后面初始化数据库可能会失败
[root@db1 ~]# yum install -y mariadb mariadb-server
[root@db1 ~]# systemctl start mariadby                  
[root@db1 ~]# systemctl enable mariadb

#初始化 MariaDB 数据库
[root@db1 ~]# mysql_secure_installation 
选项如下
	Set root password? [Y/n] y
	New password: 
	Re-enter new password: 
	Password updated successfully!
	Remove anonymous users? [Y/n] y
	Disallow root login remotely? [Y/n] n
	Remove test database and access to it? [Y/n] y
	Reload privilege tables now? [Y/n] y

3：配置数据库集群主节点 （db1节点）
[root@db1 ~]# vi /etc/my.cnf
	log_bin = mysql-bin		//记录操作日志
	binlog_ignore_db = mysql	//不同步 MySQL 系统数据库
	server_id = 167			//这里的 id 直接设置会IP地址最后的数字
[root@db1 ~]# systemctl restart mariadb		//重启服务，这样配置才会生效

4：开放主节点的数据库权限
#在节点 db1 上操作
[root@db1 ~]# mysql -uroot -p000000	//进入数据库
MariaDB [(none)]> grant all privileges on * . * to root@`%` identified by "000000";	//给予任何客户端可以 以root用户登录到数据库。

#在节点 db1 数据库上创建一个 user 用户，让从节点 db2 连接，并赋予从节点同步主节点数据库的权限
MariaDB [(none)]> grant replication slave on * . * to `user`@`db2` identified by "000000";

5：配置从节点 db2 主机同步主节点 db1
[root@db2 ~]# vi /etc/my.cnf		//进入配置文件
server_id = 168	#添加server_id ,注意这里的ID是唯一的，不能和master server id 一样
[root@db2 ~]# mysql -uroot -p000000	//进入数据库
MariaDB [(none)]> change master to master_host='db1',master_user='user',master_password='000000';	//配置连接信息

	